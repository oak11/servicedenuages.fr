<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Service de nuages, ">

        <link rel="alternate"  href="http://www.servicedenuages.fr/feeds/all.atom.xml" type="application/atom+xml" title="Service de nuages Full Atom Feed"/>

        <title>Making the case for Cliquet? // Service de nuages // </title>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://www.servicedenuages.fr/theme/css/pure.css">
    <link rel="stylesheet" href="http://www.servicedenuages.fr/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>
</head>

<body>
<div class="pure-g-r" id="layout">
    <div class="sidebar sidebar-article pure-u">
        <header class="header-article">
            <hgroup>
                <h5>PubliÃ©</h5>
                <p title="~2428 mots">~10mn de lecture ðŸ•‘</p>
                <p>Tue 14 July 2015</p>
                <a href="/">&larr;Liste des articles</a>
            </hgroup>
        </header>
    </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Making the case for Cliquet?</h1>
                </header>
            </section>
                        <p><a href="http://www.servicedenuages.fr/en/../pourquoi-cliquet">Lire la version franÃ§aise</a></p>
            <div class="note">
<p class="first admonition-title">Note</p>
<p class="last">Translated from the French by <a class="reference external" href="https://twitter.com/phrawzty">Dan Phrawzty</a>.</p>
</div>
<p><strong>tl;dr Cliquet is a Python toolkit for building APIs that implements best
practices in terms of production use and the HTTP protocol.</strong></p>
<div class="section" id="the-origins">
<h2>The Origins</h2>
<p>The objective for the first trimester of 2015 was to build a service for
storage and the <a class="reference external" href="http://www.servicedenuages.fr/en/../service-de-nuages">synchronisation of a reading list</a>. At the outset of the project we
tried assembling all of the best practices and recommendations from different
teams and currently deployed projects. Also, we wanted to take advantage of the
<em>Firefox Sync</em> protocol for offline sync since it's robust and proven.</p>
<p>Rather than write <a class="reference external" href="http://blog.octo.com/en/design-a-rest-api/">yet another</a>
<a class="reference external" href="http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api">article</a>
we decided to assemble what was already out there into a more formalised
protocol.</p>
<p>At the time we had two projects in the pipeline that obeyed more or less the
same rules, so we decided go with a common implementation of these best
practices (and resulting protocol) in the form of a re-usable toolkit.</p>
<p><em>Cliquet</em> was born.</p>
<img alt="Cliquet logo" class="align-center" src="http://www.servicedenuages.fr/en/../images/cliquet-logo.png" style="width: 300px; height: auto; max-width: 100%;"/>
<div class="section" id="the-intentions">
<h3>The Intentions</h3>
<blockquote class="epigraph">
What JSON structure should I use for my API? Which syntax for filtering
the querystring? How do I deal with concurrent writes? And what about
synchronising data on the client-side?</blockquote>
<p>Today, when a new project wants to take advantage of a REST API for storing and
consuming data, it is entirely reasonable to use the stock HTTP protocol and
to concentrate only on the bare essentials. This goes for the clients as well,
since the majority of code that handles interaction with the server is
reusable.</p>
<blockquote class="epigraph">
How can I verify if the service is operational? How about StatsD?  Is
Sentry configured properly? How can I deploy a new version without breaking
client apps?</blockquote>
<p>Cliquet provides everything you need to get you started in production - by
design, the transition from prototype to operational service is smooth and
rapid. Out of the box, the service will have facilities for monitoring and
configuration, as well as aides for deployment and version deprecation. As
these realities evolve in the real world, so does the toolkit.</p>
<blockquote class="epigraph">
Which storage backend should I use for the JSON documents? What happens if
the Ops team mandates that we use PostgreSQL? And what if we want to
switch to a Redis, or even memory-based backend, for local testing and
development?</blockquote>
<p>One word: abstraction. This concept lies at the heart of our our entire
implementation. Those two projects mentioned previously were, at their most
simple, HTTP services that exposed a CRUD REST API backed by persistent JSON
data stores. Since neither Pyramid nor Cornice (which we'll touch on later)
were quite ready to handle this situation, we decided to introduce some classes
to abstract the rudiments of both the REST model and of storage backends in
general.</p>
<p>An important tenet in all of our projects is that of flexibility. This means
that we try to make things optional where we can (and malleable where we
can't) - Cliquet is no different. <em>Everything is configurable</em> right from the
<tt class="docutils literal">.ini</tt> file! What's more, all of the projects that use the toolkit are
deployed in exactly the same way - only the <em>configuration</em> is different.</p>
<img alt="A meeting in Paris..." class="align-center" src="http://www.servicedenuages.fr/en/../images/cliquet-notes-whiteboard.jpg" style="width: 500px; height: auto; max-width: 100%;"/>
</div>
</div>
<div class="section" id="the-protocol">
<h2>The Protocol</h2>
<blockquote class="epigraph">
Is a REST API sufficient? Is it really necessary to re-read the HTTP spec
every time? Why are we reinventing the same protocol over and over?</blockquote>
<p>As a group, web developers tend to spend way too much energy on reinventing
the wheel with every project, which is especially heinous since many of the
decisions are arbitrary at best. This behaviour can at least partially
explained by the sheer immensity of the HTTP specification, and all which it
contains, including header formats, CORS support, content negotiation and mime
types - not to mention trickier topics like the difference between authentication
and authorisation, and how to interpret HTTP status codes...</p>
<p>In Cliquet, these are the principal questions we sought to answer definitively:</p>
<ul class="simple">
<li><strong>REST resources</strong>: The two URLs of a resource (one each for collections and
records) accept verbs and precise headers.</li>
<li><strong>Formats</strong>: The structure of the JSON responses, as well as the <a class="reference external" href="http://www.servicedenuages.fr/en/pagination-continuation-token">pagination
of lists</a>, or the syntax for
filtering and sorting of resources via the
<a class="reference external" href="https://en.wikipedia.org/wiki/Query_string">querystring</a>.</li>
<li><strong>Timestamps</strong>: A revision counter that is auto-incremented with every write
operation in a collection.</li>
<li><strong>Synchronisation</strong>: Levers to retrieve and send changes to the data (without
loss or collision) using timestamps.</li>
<li><strong>Permissions</strong>: Specifically, user-level permissions on a collection or a
record. (<em>This is a work in progress</em>) <a class="footnote-reference" href="#id3" id="id1">[1]</a>.</li>
<li><strong>Batch operations</strong>: A URL that accepts a series of JSON-formatted requests
and provides the response(s).</li>
</ul>
<p>From an operational perspective we looked at the following:</p>
<ul class="simple">
<li><strong>Version control</strong>: The cohabitation of multiple versions in production
along with alerts in the headers for versions which are end-of-life.</li>
<li><strong>Deferred requests</strong>: Client headers that can be activated during periods of
maintenance or heavy usage - the idea being to help save the server from
extraneous load.</li>
<li><strong>Error channel</strong>: All errors returned by the server have the same JSON
format and a specific identifier.</li>
<li><strong>Utilities</strong>: Various URLs that expose select metadata, public settings, and
other highly monitorable information (to keep your local sysadmin happy).</li>
</ul>
<p>The Cliquet protocol is thus a compilation of:</p>
<ul class="simple">
<li>Best practices for HTTP APIs (it's what we do for a living, after all);</li>
<li>Advice from senior system administrators whose jobs it is to maintain
services for the many millions of Firefox users;</li>
<li>Feedback from the <em>Firefox Sync</em> team regarding concurrency management and
"offline-first" design.</li>
</ul>
<p>Want to know more? No problem since it's <a class="reference external" href="http://cliquet.readthedocs.org/en/latest/api/index.html">documented in great detail</a>.</p>
<p>In an ideal world this protocol would be versioned and formalised in an RFC.
Perhaps there would even be several implementations in different languages.
<a class="footnote-reference" href="#id4" id="id2">[2]</a></p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label"></col><col></col></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>See our dedicated article on <a class="reference external" href="http://www.servicedenuages.fr/en/handling-permissions">permissions in Cliquet</a>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label"></col><col></col></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>Bear in mind that we're a very small team!</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-toolkit">
<h2>The Toolkit</h2>
<div class="section" id="technical-choices">
<h3>Technical Choices</h3>
<p>Cliquet, the protocol, is currently implemented in Python (<em>2.7, 3.4+, pypy</em>)
with <a class="reference external" href="http://trypyramid.com/">Pyramid</a> <a class="footnote-reference" href="#id6" id="id5">[3]</a>.</p>
<p><strong>Pyramid</strong> is a web framework that is responsible for all things HTTP; it
is usable by projects of all sizes, great and small.</p>
<p><strong>Cornice</strong> is an extension for Pyramid written by Alexis and Tarek that
consists of reusable <em>boilerplate</em> code. The goal here is to avoid reinventing
the wheel each time when building a REST API with Pyramid. Cornice handles
the plumbing for things like HTTP verbs and methods, header validation,
content negotiation, HTTP return codes, CORS headers, JSON schema validation,
and so forth.</p>
<p><strong>Cliquet</strong>, in turn, uses both Pyramid and Cornice to implement the protocol
and provide the necessary abstractions; both remain available for expanding
and extending from what comes in the box.</p>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label"></col><col></col></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[3]</a></td><td>We started with an implementation using <em>Python-Eve</em> (Flask) but we weren't
satisified with the API configuration process - too much hand-waving and
black magic for our taste.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="concepts">
<h3>Concepts</h3>
<p>Conceptually the toolkit reflects the protocol - there are some interesting
additional elements, however:</p>
<ul class="simple">
<li><strong>Backends</strong>: Abstractions for storage, caching, and permissions (ex.
<em>PostgreSQL, Redis, in-memory, etc.</em>)</li>
<li><strong>Monitoring</strong>: JSON-formatted logs and real-time instrumentation (StatsD)
to keep tabs on performance and health.</li>
<li><strong>Configuration</strong>: The configuration itself can be loaded from environment
variables or the <tt class="docutils literal">.ini</tt> file - or a combination of both.</li>
<li><strong>Flexibility</strong>: Most of the components can be turned on or off (or
substituted completely) via the configuration alone.</li>
<li><strong>Profiling</strong>: Built-in development utilities to help find <a class="reference external" href="https://en.wiktionary.org/wiki/bottleneck">bottlenecks</a>.</li>
</ul>
<img alt="Cliquet concepts" class="align-center" src="http://www.servicedenuages.fr/en/../images/cliquet-concepts.png" style="width: 500px; height: auto; max-width: 100%;"/>
<p>By proportion, the number of lines of code that are necessary to support REST
outweighs that of any other component in Cliquet. This is a feature; Cliquet
provides a wide range of functionality and can therefore be used in any
number of contexts (even without manipulating data).</p>
<p>The primary objective of the toolkit is aid the developer in building their
application with a minimum of fuss. You mix and match only what you need, and
every component is guaranteed to be production-ready.</p>
<p>For example, the persistence furnished by default is <em>schemaless</em> (e.g. JSONB)
but there's no reason a relational storage model couldn't be implemented. Since
all of the moving parts can be replaced directly via the configuration, it's
entirely feasible to extend Cliquet with business logic or other exotic
elements. We've got even more ideas in the "ecosystem" portion of <a class="reference external" href="http://cliquet.readthedocs.org/en/latest/ecosystem.html">our
documentation</a>.</p>
<p>In a few weeks well be introducing the idea of "events" (or "signals")
which will allow plugins to interface in a much cleaner way.</p>
<p>We put a high value on code <em>readability</em>, as well as the importance of
patterns, tests, and documentation. If you have any feedback, suggestions,
accolades, or criticisms, don't hesitate to <a class="reference external" href="https://github.com/mozilla-services/cliquet/issues">let us know</a>!</p>
</div>
</div>
<div class="section" id="cliquet-in-action">
<h2>Cliquet in Action!</h2>
<p>We wrote a <a class="reference external" href="http://cliquet.readthedocs.org/en/latest/quickstart.html">quickstart guide</a> that requires
no knowledge of <em>Pyramid</em>.</p>
<p>Here are some examples to illustrate how straightforward Cliquet can be!</p>
<div class="section" id="step-1">
<h3>Step 1</h3>
<p>Activate Cliquet:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">cliquet</span>
<span class="kn">from</span> <span class="nn">pyramid.config</span> <span class="kn">import</span> <span class="n">Configurator</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>

    <span class="n">cliquet</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s">'1.0'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
<p>From here, most of the features of Cliquet are active and ready to be used.</p>
<p>For example, the <em>hello</em> (<tt class="docutils literal">/v1/</tt>) or <em>monitoring</em> (<tt class="docutils literal">/v1/__heartbeat__</tt>)
URLs, but also the storage and cache backends that are available in the classic
views in either Pyramid or Cornice.</p>
</div>
<div class="section" id="step-2">
<h3>Step 2</h3>
<p>Add some views:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>

    <span class="n">cliquet</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s">'1.0'</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="s">"myproject.views"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">make_wsgi_app</span><span class="p">()</span>
</pre></div>
<p>The first step in defining a CRUD resource is to define the schema with
Colander:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">cliquet</span> <span class="kn">import</span> <span class="n">resource</span><span class="p">,</span> <span class="n">schema</span>

<span class="k">class</span> <span class="nc">BookmarkSchema</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">ResourceSchema</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">URL</span><span class="p">()</span>

<span class="nd">@resource.register</span><span class="p">()</span>
<span class="k">class</span> <span class="nc">Bookmark</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">BaseResource</span><span class="p">):</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="n">BookmarkSchema</span><span class="p">()</span>
</pre></div>
<p>From here, the CRUD resource is available at <tt class="docutils literal">/v1/bookmarks</tt> with all the
synchronisation, filtering, sorting, paging, and timestamp features ready to
go. By default the records are private (per user).</p>
<div class="highlight"><pre><span class="err">$</span> <span class="err">http</span> <span class="err">GET</span> <span class="s2">"http://localhost:8000/v1/bookmarks"</span>
<span class="err">HTTP/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="err">OK</span>
<span class="err">...</span>
<span class="p">{</span>
    <span class="nt">"data"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"http://cliquet.readthedocs.org"</span><span class="p">,</span>
            <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"cc103eb5-0c80-40ec-b6f5-dad12e7d975e"</span><span class="p">,</span>
            <span class="nt">"last_modified"</span><span class="p">:</span> <span class="mi">1437034418940</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="step-3">
<h3>Step 3</h3>
<p>There's lots of room to change things up, such as the URLs and HTTP verbs, or
even modifying the fields before they're saved.</p>
<div class="highlight"><pre><span class="nd">@resource.register</span><span class="p">(</span><span class="n">collection_path</span><span class="o">=</span><span class="s">'/user/bookmarks'</span><span class="p">,</span>
                   <span class="n">record_path</span><span class="o">=</span><span class="s">'/user/bookmarks/{{id}}'</span><span class="p">,</span>
                   <span class="n">collection_methods</span><span class="o">=</span><span class="p">(</span><span class="s">'GET'</span><span class="p">,))</span>
<span class="k">class</span> <span class="nc">Bookmark</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">BaseResource</span><span class="p">):</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="n">BookmarkSchema</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">process_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">old</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">old</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">new</span><span class="p">[</span><span class="s">'device'</span><span class="p">]</span> <span class="o">!=</span> <span class="n">old</span><span class="p">[</span><span class="s">'device'</span><span class="p">]:</span>
            <span class="n">device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'User-Agent'</span><span class="p">)</span>
            <span class="n">new</span><span class="p">[</span><span class="s">'device'</span><span class="p">]</span> <span class="o">=</span> <span class="n">device</span>
        <span class="k">return</span> <span class="n">new</span>
</pre></div>
<p>For more information, see the <a class="reference external" href="http://cliquet.readthedocs.org/en/latest/reference/resource.html">resource documentation</a> .</p>
</div>
<div class="section" id="step-4-optional">
<h3>Step 4 (optional)</h3>
<p>Let's try using Cliquet <em>abstractions</em> in a Cornice <em>view</em>:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">cliquet</span> <span class="kn">import</span> <span class="n">Service</span>

<span class="n">score</span> <span class="o">=</span> <span class="n">Service</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"score"</span><span class="p">,</span>
                <span class="n">path</span><span class="o">=</span><span class="s">'/score/{game}'</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s">"Store game score"</span><span class="p">)</span>

<span class="nd">@score.post</span><span class="p">(</span><span class="n">schema</span><span class="o">=</span><span class="n">ScoreSchema</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">post_score</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">collection_id</span> <span class="o">=</span> <span class="s">'scores-'</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="n">match_dict</span><span class="p">[</span><span class="s">'game'</span><span class="p">]</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">authenticated_userid</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">validated</span>  <span class="c"># c.f. Cornice.</span>

    <span class="n">storage</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">storage</span>
    <span class="n">record</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">collection_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">record</span>
</pre></div>
</div>
</div>
<div class="section" id="feedback">
<h2>Feedback</h2>
<p>Have something you'd like to say? Want to get involved? Great! We love
community contributions and would be glad to help you get started.</p>
<div class="section" id="areas-for-improvement">
<h3>Areas for improvement</h3>
<p>We're quite proud of what we've built in a relatively short time frame, and as
we noted in a <a class="reference external" href="{filename/2015.07.whistler-use-cases-en.rst}">previous article</a>, there's a lot of potential
just waiting to be tapped. Nonetheless, we are aware of a few areas where we
could improve things - maybe you'd like to help?</p>
<ul class="simple">
<li><strong>API Documenatation</strong>: Right now we don't have a good solution for a project
based on Cliquet to easily integrate all of the API documentation.</li>
<li><strong>Documentation in general</strong>: It's difficult to write, organise, and maintain
documentation, especially when it's aimed at a general public that runs the
gamut from absolute beginner to expert. We are victims of the "<a class="reference external" href="https://en.wikipedia.org/wiki/Curse_of_knowledge">curse of
knowledge</a>".</li>
<li><strong>Protocol</strong>: At some point we're going to have to properly version the
protocol, which means making a division within versions of Cliquet itself;
this will be necessary if we want to move the ecosystem forward.</li>
<li><strong>Conservatism</strong>: We're fans of stability and robustness, but we don't live
in a vacuum and must therefore sometimes bend to the realities of the real
world. Moving forward with Python 3 is a part of this (async is a good
target).</li>
<li><strong>Releases</strong>: The flip side of factoring. Occasionally we add features or
otherwise evolve the toolkit as a response to the requirements of a specific
project. As a result, we end up having to do waterfall-style project
releases.</li>
</ul>
</div>
<div class="section" id="common-questions">
<h3>Common Questions</h3>
<div class="section" id="why-python">
<h4>Why Python?</h4>
<p>The simple answer is that we like Python! Seriously though, the fact of the
matter was that our timetable was pretty tight - we didn't have time to learn a
new language.</p>
<p>That and the fact the whole time had just spent on a year on a Node.js project
from which we needed to recover.</p>
</div>
<div class="section" id="why-not-django">
<h4>Why not Django?</h4>
<p>We definitely considered it, especially given the number of fans of the <em>Django
REST Framework</em> in the team. Ultimately we decided that the flexibility of
Pyramid's lightweight framework was a better fit.</p>
</div>
<div class="section" id="why-not-an-async-framework-in-python-3">
<h4>Why not an async framework in Python 3?</h4>
<p>At the time, the Mozilla Operations team supported only Python 2.7 in
production (much to our chagrin).</p>
<p>For Reading List <a class="reference external" href="https://github.com/mozilla-services/readinglist/blob/1.7.0/readinglist/__init__.py#L19-L26">we activated gevent</a>.</p>
<p>That said, since our only goal is to implement a well-defined protocol, we may
some day write Cliquet in <em>aiohttp</em> or <em>Go</em> if the opportunity presents itself.</p>
</div>
<div class="section" id="why-not-json-api">
<h4>Why not JSON-API?</h4>
<p>Like we mentioned in a <a class="reference external" href="http://www.servicedenuages.fr/en/apidays-barcelona-retours">previous post (fr)</a>, JSON-API is a specification that
touches on a lot of what we wanted - we didn't know about it when we started
with our own protocol. Since our proposition is pretty minimalist in
comparison, the idea of integrating JSON-API hasn't progressed beyond the
<a class="reference external" href="https://github.com/mozilla-services/cliquet/issues/254">discussion phase</a>
yet.</p>
</div>
<div class="section" id="is-cliquet-a-rest-framework-for-pyramid">
<h4>Is Cliquet a REST framework for Pyramid?</h4>
<p>No.</p>
<p>Beyond the CRUD resources classes in Cliquet (which implement a highly
specific protocol), you must use Cornice or Pyramid directly.</p>
</div>
<div class="section" id="is-cliquet-sufficiently-generic-for-non-mozilla-projects">
<h4>Is Cliquet sufficiently generic for non-Mozilla projects?</h4>
<p>Yes!</p>
<p>It's designed from the ground up such that every component can be
turned on or off, or substituted entirely, right from the configuration file
(or from the environment).</p>
<p>If the combination of HTTP, JSON, and CRUD resources satisfies your use case,
then Cliquet is a pretty safe bet for you new application. Combined with
a design based on production best practices and handy abstractions, Cliquet
offers a straightforward way to quickly get up and running with a Pyramid /
Cornice webapp.</p>
</div>
<div class="section" id="do-the-json-resources-support-complex-relational-models">
<h4>Do the JSON resources support complex relational models?</h4>
<p>The built-in persistence layer is relatively simple and should fit almost any
use case where the data have no particular relationship; however, you could
take advantage of the full power of the protocol by using a custom Collection
class to manage these relations.</p>
<p>As an aside, this might be a good excuse to implement the protocol within the
Django REST framework. :-)</p>
</div>
<div class="section" id="is-it-possible-to-do-xyz">
<h4>Is it possible to do XYZ?</h4>
<p>We'd like to prepare a series of recipes and tutorials, but for that, we need
to collect idea from the community. Some potential ideas include:</p>
<ul class="simple">
<li>Hooks for GitHub authentication.</li>
<li>Modifying the JSON logging format.</li>
<li>Storing mapping (topographical, geo, etc) data.</li>
</ul>
</div>
<div class="section" id="can-cliquet-deal-with-files">
<h4>Can Cliquet deal with files?</h4>
<p>No. Well, <a class="reference external" href="https://github.com/mozilla-services/cliquet/issues/236">not yet</a>
at least.</p>
<p>We're holding off until we have a concrete need for this functionality at
Mozilla. Should file storage become a thing, it would likely use <a class="reference external" href="http://remotestorage.io/">Remote
Storage</a> in order to hook into that
growing ecosystem.</p>
</div>
<div class="section" id="will-feature-xyz-be-implemented">
<h4>Will feature XYZ be implemented?</h4>
<p>Cliquet is already quite well stocked with features. In general, rather than
implementing new functionality, we'd rather work on ensuring that the base
abstractions and extension mechanisms are robust enough to allow for a diverse
plugin-style ecosystem.</p>
</div>
</div>
</div>

            <div class="hr"></div>
            <a href="#" class="go-top">Revenir au dÃ©but</a>
<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "servicedenuages"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div><footer class="footer">
    <p>&copy; Service de nuages &ndash;
        DÃ©veloppÃ© avec <a href="https://github.com/PurePelicanTheme/pure">Pure Theme</a>
        et <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
</div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>
<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.notmyidea.org/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.notmyidea.org/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->
  <script src="http://www.servicedenuages.fr/theme/js/instantclick.min.js" data-no-instant></script>
  <script data-no-instant>InstantClick.init();</script>
</body>
</html>